# Navigate to Desktop directory - PowerShell
cd 'C:\Users\Administrator\Desktop\'

# Curl Docker installation script
curl -o lab12-script.sh https://raw.githubusercontent.com/godisnemus/lacite/code/lab12/12-lab_script.sh

# SSH to Ubuntu VM with MobaXterm

# Copy Kubernetes install script to Ubuntu and execute it
# ...
chmod 755 install.sh
sudo ./install.sh

# Wait for reboot... Reconnect to ubuntu-VM

# Check installation
kubectl version

# Check for nodes
kuebctl get nodes

# Check for systems pods
kubectl get pods -n kube-system

# Create a pod
vim pod.yaml

apiVersion: apps/v1
kind: Deployment
metadata:
  name: webapp
spec:
  selector:
    matchLabels:
      run: webapp
  replicas: 1
  template:
    metadata:
      labels:
        run: webapp
    spec:
      containers:
      - name: webapp
        image: nginx
        ports:
        - containerPort: 80

# Deploy pod
kubectl apply -f pod.yaml

#Verify pod
kubectl get pod
kubectl describe pod

# Create a service
vim service.yaml

# Deploy service
kubectl apply -f service.yaml

apiVersion: v1
kind: Service
metadata:
  name: webapp
  labels:
    run: webapp
spec:
  ports:
  - port: 80
    protocol: TCP
  selector:
    run: webapp

#Verify service
kubectl get service
kubectl describe service webapp

# Verify connectivity
curl <10.88.119.68:80>

# Clean up
kubectl delete -f pod.yaml
kubectl delete -f service.yaml

